import{css as oe,LitElement as se,html as ot,svg as mt}from"https://cdn.jsdelivr.net/gh/lit/dist@2/all/lit-all.min.js";const Te=oe`.o21pay-payment-full{display:inline-block;overflow:hidden;position:relative;box-shadow:rgb(0 0 0 / 35%) 0 5px 15px;transition:all .2s linear;border:1px solid #d3d3d3;padding:10px;cursor:initial;border-radius:15px;background-color:#fff}.o21pay-edit{text-align:center}.o21pay-input{font-size:18px;border:1px solid #d3d3d3;border-radius:5px;padding:10px;box-sizing:border-box}.o21pay-button{background-image:url(https://assets.obvious21.com/o21pay-assets/o21pay-button.png);background-repeat:no-repeat;background-size:auto 25px;background-position:22px 8px;background-color:#68d18d;border-color:#68d18d;color:#fff;font-weight:400;vertical-align:middle;border:1px solid transparent;background-position:top 10px;font-size:1rem;line-height:1.5;height:40px;width:140px;border-radius:20px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.o21pay-button:hover{color:#fff;background-color:#218838;border-color:#1e7e34}#amount{margin-top:5px;width:200px;text-align:center}#order_ref{margin-top:5px;width:200px;margin-bottom:3px;text-align:center}#suggestion{display:none}#page2{display:none}#o21pay-qr{float:left}@media screen and (max-width:1023px){.o21pay-p-vc{display:none}}@media only screen and (min-width:1024px){.o21pay-p-vc{vertical-align:middle;display:table-cell;height:190px;padding-left:20px;padding-right:20px;text-align:center}}.o21pay-poweredby{margin:0;font-size:12px;color:#778899}.close{z-index:9999;position:absolute;top:10px;right:15px;width:20px;height:20px;opacity:.3;cursor:pointer;visibility:hidden}.close:hover{opacity:1}.close:after,.close:before{position:absolute;left:15px;content:" ";height:20px;width:2px;background-color:#000}.close:before{transform:rotate(45deg)}.close:after{transform:rotate(-45deg)}.divider{position:absolute;left:220px;width:200px;bottom:70px;right:20px;border:2px solid #9fd3b1;border-radius:2px}.o21pay-tag{background-color:rgb(119 136 153);display:inline-block;height:32px;padding:0 16px;line-height:30px;font-size:12px;color:#fff;border:1px solid #909399;border-radius:16px;box-sizing:border-box;white-space:nowrap;margin-left:2px;margin-right:2px;cursor:pointer}@keyframes zoom-in-zoom-out{0%{transform:scale(1,1)}50%{transform:scale(1.1,1.1)}100%{transform:scale(1,1)}}`,Re="http://localhost:3400/api/v1/";var Ne=Object.defineProperty,Ie=(r,t,e)=>t in r?Ne(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Me=(r,t,e)=>(Ie(r,typeof t!="symbol"?t+"":t,e),e);const ke=()=>navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"en";class ae extends se{static get properties(){return{merchant_id:{type:String,attribute:"merchant_id"},secretkey:{type:String,attribute:"secretkey"},apiurl:{type:String,attribute:"apiurl"},form:{type:Boolean,attribute:"form"},amount:{type:String,attribute:"amount"},order_ref:{type:String,attribute:"order_ref"},hidden_order_ref:{type:Boolean,attribute:"hidden_order_ref"},suggestion:{type:String,attribute:"suggestion"},readonly:{type:Boolean,attribute:"readonly"},disabled:{type:Boolean,attribute:"disabled"},texts:{type:Array,attribute:"texts"}}}constructor(){super(),this.form=!1,this.url="",this.amount="",this.apiurl=Re,this.currency="EUR",this.suggestion="",this.arraySuggestion=[],this.texts={TXT_PR_LINE1:"To proceed to payment, you can either click",TXT_PR_LINE2:"on the QR-Code either scan with your mobile"},navigator&&(this.locale=ke())}init(t,e){this.url="";let n=this.renderRoot.querySelector(".o21pay-payment-full");n.style.removeProperty("height"),this.renderRoot.querySelector(".close").style.visibility="hidden",this.renderRoot.querySelector(".o21pay-edit").hidden=!1,n=this.renderRoot.querySelector("#suggestion"),!this.suggestion||!this.suggestion.length?n.style.display="none":n.style.display="block",n=this.renderRoot.querySelector("#page2"),n.style.display="none",t&&(this.amount=t),this.order_ref=e||""}async _paymentRequest(t,e,n,i,o){const s=this.apiurl+`merchants/${t}/paymentRequest`,l={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({secretkey:e,amount:n,currency_code:i,order_ref:o})},a=await(await fetch(s,l)).json();return a.data?a.data.url:(console.log(a),null)}async _onO21Pay(t){if(!this.merchant_id||!this.merchant_id.length){alert("Missing merchant_id");return}let e=this.renderRoot.querySelector("#amount");if(e){let i=e.value;i=i.replace(",","."),i=i.replace("\u20AC",""),this.amount=i}if(!this.amount||!this.amount.length){alert("Missing Amount");return}if(e=this.renderRoot.querySelector("#order_ref"),e&&(this.order_ref=e.value),!this.order_ref||!this.order_ref.length){alert("Missing order_ref");return}const n=await this._paymentRequest(this.merchant_id,this.secretkey,this.amount,"EUR",this.order_ref);if(n&&n.length){this.url=n;const i={detail:{url:this.url},bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("o21pay_payment_request",i));let o=this.renderRoot.querySelector(".o21pay-payment-full");if(this.form){this.renderRoot.querySelector(".o21pay-edit").hidden=!0,o.style.height="200px",this.renderRoot.querySelector(".close").style.visibility="visible";const s=this;o=s.renderRoot.querySelector("o21pay-qr"),o.url=s.url,o=this.renderRoot.querySelector("#suggestion"),o.style.display="none",o=s.renderRoot.querySelector("#page2"),o.style.display="block"}else o&&(o.style.height="52px")}}onInit(t){this.init(this.amount,"")}onFocus(t){const e=t.target;return e.readOnly===!0?null:(e.type="number",e.value=e.lastValue,e.value)}onBlur(t){const e=t.target;e.value||(e.value=0),e.lastValue=e.value,this.amount=e.value}changeViewInput(t){if(!t)return;let e=this.amount;e||(e=0),t.type="",t.lastValue=e,t.value=parseFloat(e).toLocaleString(this.locale,{style:"currency",maximumFractionDigits:2,minimumFractionDigits:2,currency:this.currency,currencyDisplay:"symbol"})}_onTag(t){let e=t.target.dataset.source;e&&(e=parseFloat(e),this.amount=e)}updated(t){if(t.has("amount")){const e=this.renderRoot.getElementById("amount");this.changeViewInput(e)}if(t.has("readonly")){let e=this.renderRoot.getElementById("amount");e&&e.setAttribute("readonly","readonly"),e=this.renderRoot.getElementById("order_ref"),e&&e.setAttribute("readonly","readonly")}if(t.has("disabled")){let e=this.renderRoot.getElementById("amount");e&&e.setAttribute("disabled","disabled"),e=this.renderRoot.getElementById("order_ref"),e&&e.setAttribute("disabled","disabled")}if(t.has("hidden_order_ref")){let e=this.renderRoot.getElementById("order_ref");e&&e.setAttribute("hidden","hidden")}if(t.has("suggestion")){let e=this.renderRoot.getElementById("suggestion");e?!this.suggestion||!this.suggestion.length?(this.arraySuggestion=[],e.style.display="none"):(this.arraySuggestion=this.suggestion.split(","),e.style.display="block"):this.arraySuggestion=[],this.requestUpdate()}}render(){return this.form===!0?ot`<div class="o21pay-payment-full"><div class="close" @click="${this.onInit}"></div><div class="o21pay-edit"><input id="amount" class="o21pay-input" type="number" min="0.00" max="15000.00" step="0.01" .value="${this.amount}" placeholder="0.00" @focus="${this.onFocus}" @blur="${this.onBlur}"> <input id="order_ref" class="o21pay-input" type="text" .value="${this.order_ref}" placeholder="Your Order Reference" style="margin-left:10px"> Â  <button class="o21pay-button" @click="${this._onO21Pay}"></div><div id="suggestion" style="margin-top:10px;animation:zoom-in-zoom-out .8s ease 1">${this.arraySuggestion.map(t=>ot`<span class="o21pay-tag" data-source="${t}" @click="${this._onTag}">${parseFloat(t).toLocaleString(this.locale,{style:"currency",maximumFractionDigits:2,minimumFractionDigits:2,currency:this.currency,currencyDisplay:"symbol"})}</span>`)}</div><div id="page2"><o21pay-qr id="o21pay-qr" size="180" theme="dark" shadow></o21pay-qr><div class="o21pay-p-vc">${this.texts.TXT_PR_LINE1}<br>${this.texts.TXT_PR_LINE2}</div><hr class="divider"></div></div><div class="o21pay-poweredby"><svg style="position:relative;top:2px" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 10.5C19.6569 10.5 21 11.8431 21 13.5V19.5C21 21.1569 19.6569 22.5 18 22.5H6C4.34315 22.5 3 21.1569 3 19.5V13.5C3 11.8431 4.34315 10.5 6 10.5V7.5C6 4.18629 8.68629 1.5 12 1.5C15.3137 1.5 18 4.18629 18 7.5V10.5ZM12 3.5C14.2091 3.5 16 5.29086 16 7.5V10.5H8V7.5C8 5.29086 9.79086 3.5 12 3.5ZM18 12.5H6C5.44772 12.5 5 12.9477 5 13.5V19.5C5 20.0523 5.44772 20.5 6 20.5H18C18.5523 20.5 19 20.0523 19 19.5V13.5C19 12.9477 18.5523 12.5 18 12.5Z" fill="currentColor"/></svg> <span>Payment secured and powered by O21Pay</span></div>`:ot`<button class="o21pay-button" @click="${this._onO21Pay}">`}}Me(ae,"styles",[Te]);window.customElements.define("o21pay-payment",ae);const Le=oe`.wrapper{opacity:0;z-index:10;transition:opacity .25s ease-in}.wrapper:not(.open){visibility:hidden}.wrapper.open{opacity:1;visibility:visible}.overlay{background:rgba(0,0,0,.4);height:100%;width:100%;top:0;left:0;position:fixed}.dialog{background:#e1e4f0;border-radius:10px;padding:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:100px;height:100px;z-index:9998;box-shadow:rgba(0,0,0,.35) 0 5px 15px}.drawer{position:absolute;box-sizing:border-box;background-color:#e1e4f0;display:flex;flex-direction:column;overflow:hidden;outline:0;top:0;bottom:0;height:100%;z-index:9998;box-shadow:0 8px 10px -5px rgb(0 0 0 / 20%),0 16px 24px 2px rgb(0 0 0 / 14%),0 6px 30px 5px rgb(0 0 0 / 12%)}.drawer-header{align-items:center;color:#72767b;display:flex;margin-bottom:32px;padding:10px 20px 0}.close{z-index:9999;position:absolute;top:-25px;right:10px;width:20px;height:20px;opacity:.3;cursor:pointer}.close-drawer-left{top:10px!important;left:10px!important}.close-drawer-right{top:10px!important;right:20px!important}.close:hover{opacity:1}.close:after,.close:before{position:absolute;left:15px;content:" ";height:20px;width:2px;background-color:#000}.close:before{transform:rotate(45deg)}.close:after{transform:rotate(-45deg)}.orbit-spinner-text{position:absolute;left:50%;top:43%;transform:translate(-50%,-43%);z-index:2;text-align:center}.orbit-spinner,.orbit-spinner *{box-sizing:border-box}.orbit-spinner{height:55px;width:55px;border-radius:50%;perspective:800px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:48px;height:48px;z-index:2}.orbit-spinner .orbit{position:absolute;box-sizing:border-box;width:100%;height:100%;border-radius:50%}.orbit-spinner .orbit:nth-child(1){left:0;top:0;animation:orbit-spinner-orbit-one-animation 1.2s linear infinite;border-bottom:3px solid #ff1d5e}.orbit-spinner .orbit:nth-child(2){right:0;top:0;animation:orbit-spinner-orbit-two-animation 1.2s linear infinite;border-right:3px solid #ff1d5e}.orbit-spinner .orbit:nth-child(3){right:0;bottom:0;animation:orbit-spinner-orbit-three-animation 1.2s linear infinite;border-top:3px solid #ff1d5e}@keyframes orbit-spinner-orbit-one-animation{0%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(360deg)}}@keyframes orbit-spinner-orbit-two-animation{0%{transform:rotateX(50deg) rotateY(10deg) rotateZ(0)}100%{transform:rotateX(50deg) rotateY(10deg) rotateZ(360deg)}}@keyframes orbit-spinner-orbit-three-animation{0%{transform:rotateX(35deg) rotateY(55deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(55deg) rotateZ(360deg)}}.obv-frameContainerStyle{border-radius:10px}.obv-frameStyle{border:0;border-radius:10px}iframe{width:100%;height:100%}`;var Ue=Object.defineProperty,ze=(r,t,e)=>t in r?Ue(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,De=(r,t,e)=>(ze(r,typeof t!="symbol"?t+"":t,e),e);class le extends se{static get properties(){return{width:{type:String,attribute:"width"},height:{type:String,attribute:"height"},mode:{type:String,attribute:"mode"},url:{type:String},open:{type:Boolean},hideSpinner:{type:Boolean},texts:{type:Array,attribute:"texts"},events:{hasChanged(t,e){return!0}}}}constructor(){super(),this.open=!1,this.oribitStyle="borderColor: red; animationDuration: 1000ms;",this.width="375px",this.height="560px",this.modal="dialog",this.texts={TXT_CNX:"Connection in progress..."}}updated(t){if(t.has("events")){const e=t.get("events"),n=this.events;e&&window.removeEventListener("message",e);const i=this;window.addEventListener("message",function(o){if(o&&o.data){const s=o.data;if(s){const l=s.message;if(l==="o21pay_ready"){const a=i.shadowRoot.getElementById("framePayment");a&&(a.style.opacity=1)}n&&l&&n(s)}}})}super.updated(t)}init(t,e,n,i="dialog"){if(!t||!t.length)return!1;e!==void 0&&(this.width=e),n!==void 0&&(this.height=n),i!==void 0&&(this.mode=i),this.hideSpinner=!1,t+=`&time=${new Date().getTime()}`;const o=this.renderRoot.querySelector("#framePayment");return o?(o.style.opacity=0,this.mode.indexOf("drawer")!==-1&&(t.indexOf("&close")===-1&&(t+="&close=0"),this.mode.indexOf("drawer-left")!==-1?t+="&gr=1":t+="&gl=1"),t.indexOf("&reset")===-1&&(t+="&reset"),o.src=t,!0):!1}reset(){const t=this.shadowRoot.getElementById("framePayment");t.src="about:blank"}spinnerStyle(){return"display: "+(this.hideSpinner?"none":"block")}closeWindow(){this.open=!1,this.events&&this.events({message:"o21pay_closed"}),this.reset()}render(){let t="wrapper"+(this.open?" open":""),e="dialog",n="",i="close",o=`width:${this.width}; height:${this.height}`;return this.mode==="drawer-left"?(e="drawer",n="drawer-header",i="",o=`width:${this.width};left:0;`):this.mode==="drawer-right"?(e="drawer",n="drawer-header",i="",o=`width:${this.width};right:0;`):this.mode==="fullscreen"?o=`width:${window.outerWidth}px;height:${window.outerHeight}px;border-radius: 0`:i="",ot`<div class="${t}"><div class="overlay"></div><div class="${e}" style="${o}"><div class="${n}"></div><div class="${i}" @click="${this.closeWindow}"></div><iframe id="framePayment" class="obv-frameStyle" allowtransparency="true"></iframe><div class="orbit-spinner-text" style="${this.spinnerStyle()}"><span>${this.texts.TXT_CNX}</span></div><div class="orbit-spinner" style="${this.spinnerStyle()}"><div class="orbit one" style="${this.oribitStyle}"></div><div class="orbit two" style="${this.oribitStyle}"></div><div class="orbit three" style="${this.oribitStyle}"></div></div></div></div>`}close(){this.open=!1}}De(le,"styles",[Le]);window.customElements.define("o21pay-dialog",le);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const st=window,Lt=st.ShadowRoot&&(st.ShadyCSS===void 0||st.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ut=Symbol(),Vt=new WeakMap;class ce{constructor(t,e,n){if(this._$cssResult$=!0,n!==Ut)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(Lt&&t===void 0){const n=e!==void 0&&e.length===1;n&&(t=Vt.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&Vt.set(e,t))}return t}toString(){return this.cssText}}const Oe=r=>new ce(typeof r=="string"?r:r+"",void 0,Ut),He=(r,...t)=>{const e=r.length===1?r[0]:t.reduce((n,i,o)=>n+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+r[o+1],r[0]);return new ce(e,r,Ut)},Fe=(r,t)=>{Lt?r.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):t.forEach(e=>{const n=document.createElement("style"),i=st.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=e.cssText,r.appendChild(n)})},qt=Lt?r=>r:r=>r instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return Oe(e)})(r):r;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var bt;const at=window,jt=at.trustedTypes,Ve=jt?jt.emptyScript:"",Kt=at.reactiveElementPolyfillSupport,Tt={toAttribute(r,t){switch(t){case Boolean:r=r?Ve:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,t){let e=r;switch(t){case Boolean:e=r!==null;break;case Number:e=r===null?null:Number(r);break;case Object:case Array:try{e=JSON.parse(r)}catch{e=null}}return e}},de=(r,t)=>t!==r&&(t==t||r==r),wt={attribute:!0,type:String,converter:Tt,reflect:!1,hasChanged:de};class L extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),((e=this.h)!==null&&e!==void 0?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach((e,n)=>{const i=this._$Ep(n,e);i!==void 0&&(this._$Ev.set(i,n),t.push(i))}),t}static createProperty(t,e=wt){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const n=typeof t=="symbol"?Symbol():"__"+t,i=this.getPropertyDescriptor(t,n,e);i!==void 0&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(i){const o=this[t];this[e]=i,this.requestUpdate(t,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||wt}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),t.h!==void 0&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,n=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of n)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const i of n)e.unshift(qt(i))}else t!==void 0&&e.push(qt(t));return e}static _$Ep(t,e){const n=e.attribute;return n===!1?void 0:typeof n=="string"?n:typeof t=="string"?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(t=this.constructor.h)===null||t===void 0||t.forEach(e=>e(this))}addController(t){var e,n;((e=this._$ES)!==null&&e!==void 0?e:this._$ES=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((n=t.hostConnected)===null||n===void 0||n.call(t))}removeController(t){var e;(e=this._$ES)===null||e===void 0||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])})}createRenderRoot(){var t;const e=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return Fe(e,this.constructor.elementStyles),e}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$ES)===null||t===void 0||t.forEach(e=>{var n;return(n=e.hostConnected)===null||n===void 0?void 0:n.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$ES)===null||t===void 0||t.forEach(e=>{var n;return(n=e.hostDisconnected)===null||n===void 0?void 0:n.call(e)})}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EO(t,e,n=wt){var i;const o=this.constructor._$Ep(t,n);if(o!==void 0&&n.reflect===!0){const s=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:Tt).toAttribute(e,n.type);this._$El=t,s==null?this.removeAttribute(o):this.setAttribute(o,s),this._$El=null}}_$AK(t,e){var n;const i=this.constructor,o=i._$Ev.get(t);if(o!==void 0&&this._$El!==o){const s=i.getPropertyOptions(o),l=typeof s.converter=="function"?{fromAttribute:s.converter}:((n=s.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?s.converter:Tt;this._$El=o,this[o]=l.fromAttribute(e,s.type),this._$El=null}}requestUpdate(t,e,n){let i=!0;t!==void 0&&(((n=n||this.constructor.getPropertyOptions(t)).hasChanged||de)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),n.reflect===!0&&this._$El!==t&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(t,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,o)=>this[o]=i),this._$Ei=void 0);let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(t=this._$ES)===null||t===void 0||t.forEach(i=>{var o;return(o=i.hostUpdate)===null||o===void 0?void 0:o.call(i)}),this.update(n)):this._$Ek()}catch(i){throw e=!1,this._$Ek(),i}e&&this._$AE(n)}willUpdate(t){}_$AE(t){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){this._$EC!==void 0&&(this._$EC.forEach((e,n)=>this._$EO(n,this[n],e)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}L.finalized=!0,L.elementProperties=new Map,L.elementStyles=[],L.shadowRootOptions={mode:"open"},Kt?.({ReactiveElement:L}),((bt=at.reactiveElementVersions)!==null&&bt!==void 0?bt:at.reactiveElementVersions=[]).push("1.6.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var vt;const lt=window,z=lt.trustedTypes,Jt=z?z.createPolicy("lit-html",{createHTML:r=>r}):void 0,N=`lit$${(Math.random()+"").slice(9)}$`,ue="?"+N,qe=`<${ue}>`,D=document,Q=(r="")=>D.createComment(r),Z=r=>r===null||typeof r!="object"&&typeof r!="function",he=Array.isArray,je=r=>he(r)||typeof r?.[Symbol.iterator]=="function",J=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Yt=/-->/g,Xt=/>/g,k=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Qt=/'/g,Zt=/"/g,fe=/^(?:script|style|textarea|title)$/i,Ke=r=>(t,...e)=>({_$litType$:r,strings:t,values:e}),$t=Ke(1),O=Symbol.for("lit-noChange"),A=Symbol.for("lit-nothing"),Gt=new WeakMap,U=D.createTreeWalker(D,129,null,!1),Je=(r,t)=>{const e=r.length-1,n=[];let i,o=t===2?"<svg>":"",s=J;for(let a=0;a<e;a++){const c=r[a];let d,b,u=-1,h=0;for(;h<c.length&&(s.lastIndex=h,b=s.exec(c),b!==null);)h=s.lastIndex,s===J?b[1]==="!--"?s=Yt:b[1]!==void 0?s=Xt:b[2]!==void 0?(fe.test(b[2])&&(i=RegExp("</"+b[2],"g")),s=k):b[3]!==void 0&&(s=k):s===k?b[0]===">"?(s=i??J,u=-1):b[1]===void 0?u=-2:(u=s.lastIndex-b[2].length,d=b[1],s=b[3]===void 0?k:b[3]==='"'?Zt:Qt):s===Zt||s===Qt?s=k:s===Yt||s===Xt?s=J:(s=k,i=void 0);const w=s===k&&r[a+1].startsWith("/>")?" ":"";o+=s===J?c+qe:u>=0?(n.push(d),c.slice(0,u)+"$lit$"+c.slice(u)+N+w):c+N+(u===-2?(n.push(void 0),a):w)}const l=o+(r[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Jt!==void 0?Jt.createHTML(l):l,n]};class G{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let o=0,s=0;const l=t.length-1,a=this.parts,[c,d]=Je(t,e);if(this.el=G.createElement(c,n),U.currentNode=this.el.content,e===2){const b=this.el.content,u=b.firstChild;u.remove(),b.append(...u.childNodes)}for(;(i=U.nextNode())!==null&&a.length<l;){if(i.nodeType===1){if(i.hasAttributes()){const b=[];for(const u of i.getAttributeNames())if(u.endsWith("$lit$")||u.startsWith(N)){const h=d[s++];if(b.push(u),h!==void 0){const w=i.getAttribute(h.toLowerCase()+"$lit$").split(N),g=/([.?@])?(.*)/.exec(h);a.push({type:1,index:o,name:g[2],strings:w,ctor:g[1]==="."?Xe:g[1]==="?"?Ze:g[1]==="@"?Ge:ut})}else a.push({type:6,index:o})}for(const u of b)i.removeAttribute(u)}if(fe.test(i.tagName)){const b=i.textContent.split(N),u=b.length-1;if(u>0){i.textContent=z?z.emptyScript:"";for(let h=0;h<u;h++)i.append(b[h],Q()),U.nextNode(),a.push({type:2,index:++o});i.append(b[u],Q())}}}else if(i.nodeType===8)if(i.data===ue)a.push({type:2,index:o});else{let b=-1;for(;(b=i.data.indexOf(N,b+1))!==-1;)a.push({type:7,index:o}),b+=N.length-1}o++}}static createElement(t,e){const n=D.createElement("template");return n.innerHTML=t,n}}function H(r,t,e=r,n){var i,o,s,l;if(t===O)return t;let a=n!==void 0?(i=e._$Co)===null||i===void 0?void 0:i[n]:e._$Cl;const c=Z(t)?void 0:t._$litDirective$;return a?.constructor!==c&&((o=a?._$AO)===null||o===void 0||o.call(a,!1),c===void 0?a=void 0:(a=new c(r),a._$AT(r,e,n)),n!==void 0?((s=(l=e)._$Co)!==null&&s!==void 0?s:l._$Co=[])[n]=a:e._$Cl=a),a!==void 0&&(t=H(r,a._$AS(r,t.values),a,n)),t}class Ye{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:n},parts:i}=this._$AD,o=((e=t?.creationScope)!==null&&e!==void 0?e:D).importNode(n,!0);U.currentNode=o;let s=U.nextNode(),l=0,a=0,c=i[0];for(;c!==void 0;){if(l===c.index){let d;c.type===2?d=new tt(s,s.nextSibling,this,t):c.type===1?d=new c.ctor(s,c.name,c.strings,this,t):c.type===6&&(d=new We(s,this,t)),this.u.push(d),c=i[++a]}l!==c?.index&&(s=U.nextNode(),l++)}return o}p(t){let e=0;for(const n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class tt{constructor(t,e,n,i){var o;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cm=(o=i?.isConnected)===null||o===void 0||o}get _$AU(){var t,e;return(e=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&e!==void 0?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&t.nodeType===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=H(this,t,e),Z(t)?t===A||t==null||t===""?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==O&&this.g(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):je(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==A&&Z(this._$AH)?this._$AA.nextSibling.data=t:this.T(D.createTextNode(t)),this._$AH=t}$(t){var e;const{values:n,_$litType$:i}=t,o=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=G.createElement(i.h,this.options)),i);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===o)this._$AH.p(n);else{const s=new Ye(o,this),l=s.v(this.options);s.p(n),this.T(l),this._$AH=s}}_$AC(t){let e=Gt.get(t.strings);return e===void 0&&Gt.set(t.strings,e=new G(t)),e}k(t){he(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const o of t)i===e.length?e.push(n=new tt(this.O(Q()),this.O(Q()),this,this.options)):n=e[i],n._$AI(o),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,e);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var e;this._$AM===void 0&&(this._$Cm=t,(e=this._$AP)===null||e===void 0||e.call(this,t))}}class ut{constructor(t,e,n,i,o){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,i){const o=this.strings;let s=!1;if(o===void 0)t=H(this,t,e,0),s=!Z(t)||t!==this._$AH&&t!==O,s&&(this._$AH=t);else{const l=t;let a,c;for(t=o[0],a=0;a<o.length-1;a++)c=H(this,l[n+a],e,a),c===O&&(c=this._$AH[a]),s||(s=!Z(c)||c!==this._$AH[a]),c===A?t=A:t!==A&&(t+=(c??"")+o[a+1]),this._$AH[a]=c}s&&!i&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Xe extends ut{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}const Qe=z?z.emptyScript:"";class Ze extends ut{constructor(){super(...arguments),this.type=4}j(t){t&&t!==A?this.element.setAttribute(this.name,Qe):this.element.removeAttribute(this.name)}}class Ge extends ut{constructor(t,e,n,i,o){super(t,e,n,i,o),this.type=5}_$AI(t,e=this){var n;if((t=(n=H(this,t,e,0))!==null&&n!==void 0?n:A)===O)return;const i=this._$AH,o=t===A&&i!==A||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==A&&(i===A||o);o&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;typeof this._$AH=="function"?this._$AH.call((n=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&n!==void 0?n:this.element,t):this._$AH.handleEvent(t)}}class We{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){H(this,t)}}const Wt=lt.litHtmlPolyfillSupport;Wt?.(G,tt),((vt=lt.litHtmlVersions)!==null&&vt!==void 0?vt:lt.litHtmlVersions=[]).push("2.6.1");const tn=(r,t,e)=>{var n,i;const o=(n=e?.renderBefore)!==null&&n!==void 0?n:t;let s=o._$litPart$;if(s===void 0){const l=(i=e?.renderBefore)!==null&&i!==void 0?i:null;o._$litPart$=s=new tt(t.insertBefore(Q(),l),l,void 0,e??{})}return s._$AI(r),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var _t,Et;class Y extends L{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const n=super.createRenderRoot();return(t=(e=this.renderOptions).renderBefore)!==null&&t!==void 0||(e.renderBefore=n.firstChild),n}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=tn(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!1)}render(){return O}}Y.finalized=!0,Y._$litElement$=!0,(_t=globalThis.litElementHydrateSupport)===null||_t===void 0||_t.call(globalThis,{LitElement:Y});const te=globalThis.litElementPolyfillSupport;te?.({LitElement:Y});((Et=globalThis.litElementVersions)!==null&&Et!==void 0?Et:globalThis.litElementVersions=[]).push("3.2.2");var et={},en=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},ge={},C={};let zt;const nn=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];C.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};C.getSymbolTotalCodewords=function(t){return nn[t]};C.getBCHDigit=function(r){let t=0;for(;r!==0;)t++,r>>>=1;return t};C.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');zt=t};C.isKanjiModeEnabled=function(){return typeof zt<"u"};C.toSJIS=function(t){return zt(t)};var ht={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,i){if(r.isValid(n))return n;try{return t(n)}catch{return i}}})(ht);function pe(){this.buffer=[],this.length=0}pe.prototype={get:function(r){const t=Math.floor(r/8);return(this.buffer[t]>>>7-r%8&1)===1},put:function(r,t){for(let e=0;e<t;e++)this.putBit((r>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var rn=pe;function nt(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}nt.prototype.set=function(r,t,e,n){const i=r*this.size+t;this.data[i]=e,n&&(this.reservedBit[i]=!0)};nt.prototype.get=function(r,t){return this.data[r*this.size+t]};nt.prototype.xor=function(r,t,e){this.data[r*this.size+t]^=e};nt.prototype.isReserved=function(r,t){return this.reservedBit[r*this.size+t]};var on=nt,ye={};(function(r){const t=C.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,o=t(n),s=o===145?26:Math.ceil((o-13)/(2*i-2))*2,l=[o-7];for(let a=1;a<i-1;a++)l[a]=l[a-1]-s;return l.push(6),l.reverse()},r.getPositions=function(n){const i=[],o=r.getRowColCoords(n),s=o.length;for(let l=0;l<s;l++)for(let a=0;a<s;a++)l===0&&a===0||l===0&&a===s-1||l===s-1&&a===0||i.push([o[l],o[a]]);return i}})(ye);var me={};const sn=C.getSymbolSize,ee=7;me.getPositions=function(t){const e=sn(t);return[[0,0],[e-ee,0],[0,e-ee]]};var be={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const o=i.size;let s=0,l=0,a=0,c=null,d=null;for(let b=0;b<o;b++){l=a=0,c=d=null;for(let u=0;u<o;u++){let h=i.get(b,u);h===c?l++:(l>=5&&(s+=t.N1+(l-5)),c=h,l=1),h=i.get(u,b),h===d?a++:(a>=5&&(s+=t.N1+(a-5)),d=h,a=1)}l>=5&&(s+=t.N1+(l-5)),a>=5&&(s+=t.N1+(a-5))}return s},r.getPenaltyN2=function(i){const o=i.size;let s=0;for(let l=0;l<o-1;l++)for(let a=0;a<o-1;a++){const c=i.get(l,a)+i.get(l,a+1)+i.get(l+1,a)+i.get(l+1,a+1);(c===4||c===0)&&s++}return s*t.N2},r.getPenaltyN3=function(i){const o=i.size;let s=0,l=0,a=0;for(let c=0;c<o;c++){l=a=0;for(let d=0;d<o;d++)l=l<<1&2047|i.get(c,d),d>=10&&(l===1488||l===93)&&s++,a=a<<1&2047|i.get(d,c),d>=10&&(a===1488||a===93)&&s++}return s*t.N3},r.getPenaltyN4=function(i){let o=0;const s=i.data.length;for(let a=0;a<s;a++)o+=i.data[a];return Math.abs(Math.ceil(o*100/s/5)-10)*t.N4};function e(n,i,o){switch(n){case r.Patterns.PATTERN000:return(i+o)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return o%3===0;case r.Patterns.PATTERN011:return(i+o)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case r.Patterns.PATTERN101:return i*o%2+i*o%3===0;case r.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case r.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(i,o){const s=o.size;for(let l=0;l<s;l++)for(let a=0;a<s;a++)o.isReserved(a,l)||o.xor(a,l,e(i,a,l))},r.getBestMask=function(i,o){const s=Object.keys(r.Patterns).length;let l=0,a=1/0;for(let c=0;c<s;c++){o(c),r.applyMask(c,i);const d=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(c,i),d<a&&(a=d,l=c)}return l}})(be);var ft={};const I=ht,it=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],rt=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ft.getBlocksCount=function(t,e){switch(e){case I.L:return it[(t-1)*4+0];case I.M:return it[(t-1)*4+1];case I.Q:return it[(t-1)*4+2];case I.H:return it[(t-1)*4+3];default:return}};ft.getTotalCodewordsCount=function(t,e){switch(e){case I.L:return rt[(t-1)*4+0];case I.M:return rt[(t-1)*4+1];case I.Q:return rt[(t-1)*4+2];case I.H:return rt[(t-1)*4+3];default:return}};var we={},gt={};const X=new Uint8Array(512),ct=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)X[e]=t,ct[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)X[e]=X[e-255]})();gt.log=function(t){if(t<1)throw new Error("log("+t+")");return ct[t]};gt.exp=function(t){return X[t]};gt.mul=function(t,e){return t===0||e===0?0:X[ct[t]+ct[e]]};(function(r){const t=gt;r.mul=function(n,i){const o=new Uint8Array(n.length+i.length-1);for(let s=0;s<n.length;s++)for(let l=0;l<i.length;l++)o[s+l]^=t.mul(n[s],i[l]);return o},r.mod=function(n,i){let o=new Uint8Array(n);for(;o.length-i.length>=0;){const s=o[0];for(let a=0;a<i.length;a++)o[a]^=t.mul(i[a],s);let l=0;for(;l<o.length&&o[l]===0;)l++;o=o.slice(l)}return o},r.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let o=0;o<n;o++)i=r.mul(i,new Uint8Array([1,t.exp(o)]));return i}})(we);const ve=we;function Dt(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}Dt.prototype.initialize=function(t){this.degree=t,this.genPoly=ve.generateECPolynomial(this.degree)};Dt.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=ve.mod(e,this.genPoly),i=this.degree-n.length;if(i>0){const o=new Uint8Array(this.degree);return o.set(n,i),o}return n};var an=Dt,$e={},M={},Ot={};Ot.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var B={};const _e="[0-9]+",ln="[A-Z $%*+\\-./:]+";let W="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";W=W.replace(/u/g,"\\u");const cn="(?:(?![A-Z0-9 $%*+\\-./:]|"+W+`)(?:.|[\r
]))+`;B.KANJI=new RegExp(W,"g");B.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");B.BYTE=new RegExp(cn,"g");B.NUMERIC=new RegExp(_e,"g");B.ALPHANUMERIC=new RegExp(ln,"g");const dn=new RegExp("^"+W+"$"),un=new RegExp("^"+_e+"$"),hn=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");B.testKanji=function(t){return dn.test(t)};B.testNumeric=function(t){return un.test(t)};B.testAlphanumeric=function(t){return hn.test(t)};(function(r){const t=Ot,e=B;r.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(o,s){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?o.ccBits[0]:s<27?o.ccBits[1]:o.ccBits[2]},r.getBestModeForData=function(o){return e.testNumeric(o)?r.NUMERIC:e.testAlphanumeric(o)?r.ALPHANUMERIC:e.testKanji(o)?r.KANJI:r.BYTE},r.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},r.isValid=function(o){return o&&o.bit&&o.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(o,s){if(r.isValid(o))return o;try{return n(o)}catch{return s}}})(M);(function(r){const t=C,e=ft,n=ht,i=M,o=Ot,s=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,l=t.getBCHDigit(s);function a(u,h,w){for(let g=1;g<=40;g++)if(h<=r.getCapacity(g,w,u))return g}function c(u,h){return i.getCharCountIndicator(u,h)+4}function d(u,h){let w=0;return u.forEach(function(g){const v=c(g.mode,h);w+=v+g.getBitsLength()}),w}function b(u,h){for(let w=1;w<=40;w++)if(d(u,w)<=r.getCapacity(w,h,i.MIXED))return w}r.from=function(h,w){return o.isValid(h)?parseInt(h,10):w},r.getCapacity=function(h,w,g){if(!o.isValid(h))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=i.BYTE);const v=t.getSymbolTotalCodewords(h),y=e.getTotalCodewordsCount(h,w),f=(v-y)*8;if(g===i.MIXED)return f;const p=f-c(g,h);switch(g){case i.NUMERIC:return Math.floor(p/10*3);case i.ALPHANUMERIC:return Math.floor(p/11*2);case i.KANJI:return Math.floor(p/13);case i.BYTE:default:return Math.floor(p/8)}},r.getBestVersionForData=function(h,w){let g;const v=n.from(w,n.M);if(Array.isArray(h)){if(h.length>1)return b(h,v);if(h.length===0)return 1;g=h[0]}else g=h;return a(g.mode,g.getLength(),v)},r.getEncodedBits=function(h){if(!o.isValid(h)||h<7)throw new Error("Invalid QR Code version");let w=h<<12;for(;t.getBCHDigit(w)-l>=0;)w^=s<<t.getBCHDigit(w)-l;return h<<12|w}})($e);var Ee={};const Rt=C,Ae=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,fn=1<<14|1<<12|1<<10|1<<4|1<<1,ne=Rt.getBCHDigit(Ae);Ee.getEncodedBits=function(t,e){const n=t.bit<<3|e;let i=n<<10;for(;Rt.getBCHDigit(i)-ne>=0;)i^=Ae<<Rt.getBCHDigit(i)-ne;return(n<<10|i)^fn};var Ce={};const gn=M;function F(r){this.mode=gn.NUMERIC,this.data=r.toString()}F.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};F.prototype.getLength=function(){return this.data.length};F.prototype.getBitsLength=function(){return F.getBitsLength(this.data.length)};F.prototype.write=function(t){let e,n,i;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),i=parseInt(n,10),t.put(i,10);const o=this.data.length-e;o>0&&(n=this.data.substr(e),i=parseInt(n,10),t.put(i,o*3+1))};var pn=F;const yn=M,At=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function V(r){this.mode=yn.ALPHANUMERIC,this.data=r}V.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};V.prototype.getLength=function(){return this.data.length};V.prototype.getBitsLength=function(){return V.getBitsLength(this.data.length)};V.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=At.indexOf(this.data[e])*45;n+=At.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(At.indexOf(this.data[e]),6)};var mn=V,bn=function(t){for(var e=[],n=t.length,i=0;i<n;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319&&n>i+1){var s=t.charCodeAt(i+1);s>=56320&&s<=57343&&(o=(o-55296)*1024+s-56320+65536,i+=1)}if(o<128){e.push(o);continue}if(o<2048){e.push(o>>6|192),e.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){e.push(o>>12|224),e.push(o>>6&63|128),e.push(o&63|128);continue}if(o>=65536&&o<=1114111){e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128);continue}e.push(239,191,189)}return new Uint8Array(e).buffer};const wn=bn,vn=M;function q(r){this.mode=vn.BYTE,typeof r=="string"&&(r=wn(r)),this.data=new Uint8Array(r)}q.getBitsLength=function(t){return t*8};q.prototype.getLength=function(){return this.data.length};q.prototype.getBitsLength=function(){return q.getBitsLength(this.data.length)};q.prototype.write=function(r){for(let t=0,e=this.data.length;t<e;t++)r.put(this.data[t],8)};var $n=q;const _n=M,En=C;function j(r){this.mode=_n.KANJI,this.data=r}j.getBitsLength=function(t){return t*13};j.prototype.getLength=function(){return this.data.length};j.prototype.getBitsLength=function(){return j.getBitsLength(this.data.length)};j.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let e=En.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),r.put(e,13)}};var An=j,Nt={},Cn={get exports(){return Nt},set exports(r){Nt=r}};(function(r){var t={single_source_shortest_paths:function(e,n,i){var o={},s={};s[n]=0;var l=t.PriorityQueue.make();l.push(n,0);for(var a,c,d,b,u,h,w,g,v;!l.empty();){a=l.pop(),c=a.value,b=a.cost,u=e[c]||{};for(d in u)u.hasOwnProperty(d)&&(h=u[d],w=b+h,g=s[d],v=typeof s[d]>"u",(v||g>w)&&(s[d]=w,l.push(d,w),o[d]=c))}if(typeof i<"u"&&typeof s[i]>"u"){var y=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(y)}return o},extract_shortest_path_from_predecessor_list:function(e,n){for(var i=[],o=n;o;)i.push(o),e[o],o=e[o];return i.reverse(),i},find_path:function(e,n,i){var o=t.single_source_shortest_paths(e,n,i);return t.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,i={},o;e=e||{};for(o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i.queue=[],i.sorter=e.sorter||n.default_sorter,i},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var i={value:e,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(Cn);(function(r){const t=M,e=pn,n=mn,i=$n,o=An,s=B,l=C,a=Nt;function c(y){return unescape(encodeURIComponent(y)).length}function d(y,f,p){const m=[];let $;for(;($=y.exec(p))!==null;)m.push({data:$[0],index:$.index,mode:f,length:$[0].length});return m}function b(y){const f=d(s.NUMERIC,t.NUMERIC,y),p=d(s.ALPHANUMERIC,t.ALPHANUMERIC,y);let m,$;return l.isKanjiModeEnabled()?(m=d(s.BYTE,t.BYTE,y),$=d(s.KANJI,t.KANJI,y)):(m=d(s.BYTE_KANJI,t.BYTE,y),$=[]),f.concat(p,m,$).sort(function(E,S){return E.index-S.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function u(y,f){switch(f){case t.NUMERIC:return e.getBitsLength(y);case t.ALPHANUMERIC:return n.getBitsLength(y);case t.KANJI:return o.getBitsLength(y);case t.BYTE:return i.getBitsLength(y)}}function h(y){return y.reduce(function(f,p){const m=f.length-1>=0?f[f.length-1]:null;return m&&m.mode===p.mode?(f[f.length-1].data+=p.data,f):(f.push(p),f)},[])}function w(y){const f=[];for(let p=0;p<y.length;p++){const m=y[p];switch(m.mode){case t.NUMERIC:f.push([m,{data:m.data,mode:t.ALPHANUMERIC,length:m.length},{data:m.data,mode:t.BYTE,length:m.length}]);break;case t.ALPHANUMERIC:f.push([m,{data:m.data,mode:t.BYTE,length:m.length}]);break;case t.KANJI:f.push([m,{data:m.data,mode:t.BYTE,length:c(m.data)}]);break;case t.BYTE:f.push([{data:m.data,mode:t.BYTE,length:c(m.data)}])}}return f}function g(y,f){const p={},m={start:{}};let $=["start"];for(let _=0;_<y.length;_++){const E=y[_],S=[];for(let R=0;R<E.length;R++){const x=E[R],K=""+_+R;S.push(K),p[K]={node:x,lastCount:0},m[K]={};for(let yt=0;yt<$.length;yt++){const P=$[yt];p[P]&&p[P].node.mode===x.mode?(m[P][K]=u(p[P].lastCount+x.length,x.mode)-u(p[P].lastCount,x.mode),p[P].lastCount+=x.length):(p[P]&&(p[P].lastCount=x.length),m[P][K]=u(x.length,x.mode)+4+t.getCharCountIndicator(x.mode,f))}}$=S}for(let _=0;_<$.length;_++)m[$[_]].end=0;return{map:m,table:p}}function v(y,f){let p;const m=t.getBestModeForData(y);if(p=t.from(f,m),p!==t.BYTE&&p.bit<m.bit)throw new Error('"'+y+'" cannot be encoded with mode '+t.toString(p)+`.
 Suggested mode is: `+t.toString(m));switch(p===t.KANJI&&!l.isKanjiModeEnabled()&&(p=t.BYTE),p){case t.NUMERIC:return new e(y);case t.ALPHANUMERIC:return new n(y);case t.KANJI:return new o(y);case t.BYTE:return new i(y)}}r.fromArray=function(f){return f.reduce(function(p,m){return typeof m=="string"?p.push(v(m,null)):m.data&&p.push(v(m.data,m.mode)),p},[])},r.fromString=function(f,p){const m=b(f,l.isKanjiModeEnabled()),$=w(m),_=g($,p),E=a.find_path(_.map,"start","end"),S=[];for(let R=1;R<E.length-1;R++)S.push(_.table[E[R]].node);return r.fromArray(h(S))},r.rawSplit=function(f){return r.fromArray(b(f,l.isKanjiModeEnabled()))}})(Ce);const pt=C,Ct=ht,Sn=rn,xn=on,Bn=ye,Pn=me,It=be,Mt=ft,Tn=an,dt=$e,Rn=Ee,Nn=M,St=Ce;function In(r,t){const e=r.size,n=Pn.getPositions(t);for(let i=0;i<n.length;i++){const o=n[i][0],s=n[i][1];for(let l=-1;l<=7;l++)if(!(o+l<=-1||e<=o+l))for(let a=-1;a<=7;a++)s+a<=-1||e<=s+a||(l>=0&&l<=6&&(a===0||a===6)||a>=0&&a<=6&&(l===0||l===6)||l>=2&&l<=4&&a>=2&&a<=4?r.set(o+l,s+a,!0,!0):r.set(o+l,s+a,!1,!0))}}function Mn(r){const t=r.size;for(let e=8;e<t-8;e++){const n=e%2===0;r.set(e,6,n,!0),r.set(6,e,n,!0)}}function kn(r,t){const e=Bn.getPositions(t);for(let n=0;n<e.length;n++){const i=e[n][0],o=e[n][1];for(let s=-2;s<=2;s++)for(let l=-2;l<=2;l++)s===-2||s===2||l===-2||l===2||s===0&&l===0?r.set(i+s,o+l,!0,!0):r.set(i+s,o+l,!1,!0)}}function Ln(r,t){const e=r.size,n=dt.getEncodedBits(t);let i,o,s;for(let l=0;l<18;l++)i=Math.floor(l/3),o=l%3+e-8-3,s=(n>>l&1)===1,r.set(i,o,s,!0),r.set(o,i,s,!0)}function xt(r,t,e){const n=r.size,i=Rn.getEncodedBits(t,e);let o,s;for(o=0;o<15;o++)s=(i>>o&1)===1,o<6?r.set(o,8,s,!0):o<8?r.set(o+1,8,s,!0):r.set(n-15+o,8,s,!0),o<8?r.set(8,n-o-1,s,!0):o<9?r.set(8,15-o-1+1,s,!0):r.set(8,15-o-1,s,!0);r.set(n-8,8,1,!0)}function Un(r,t){const e=r.size;let n=-1,i=e-1,o=7,s=0;for(let l=e-1;l>0;l-=2)for(l===6&&l--;;){for(let a=0;a<2;a++)if(!r.isReserved(i,l-a)){let c=!1;s<t.length&&(c=(t[s]>>>o&1)===1),r.set(i,l-a,c),o--,o===-1&&(s++,o=7)}if(i+=n,i<0||e<=i){i-=n,n=-n;break}}}function zn(r,t,e){const n=new Sn;e.forEach(function(a){n.put(a.mode.bit,4),n.put(a.getLength(),Nn.getCharCountIndicator(a.mode,r)),a.write(n)});const i=pt.getSymbolTotalCodewords(r),o=Mt.getTotalCodewordsCount(r,t),s=(i-o)*8;for(n.getLengthInBits()+4<=s&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(s-n.getLengthInBits())/8;for(let a=0;a<l;a++)n.put(a%2?17:236,8);return Dn(n,r,t)}function Dn(r,t,e){const n=pt.getSymbolTotalCodewords(t),i=Mt.getTotalCodewordsCount(t,e),o=n-i,s=Mt.getBlocksCount(t,e),l=n%s,a=s-l,c=Math.floor(n/s),d=Math.floor(o/s),b=d+1,u=c-d,h=new Tn(u);let w=0;const g=new Array(s),v=new Array(s);let y=0;const f=new Uint8Array(r.buffer);for(let E=0;E<s;E++){const S=E<a?d:b;g[E]=f.slice(w,w+S),v[E]=h.encode(g[E]),w+=S,y=Math.max(y,S)}const p=new Uint8Array(n);let m=0,$,_;for($=0;$<y;$++)for(_=0;_<s;_++)$<g[_].length&&(p[m++]=g[_][$]);for($=0;$<u;$++)for(_=0;_<s;_++)p[m++]=v[_][$];return p}function On(r,t,e,n){let i;if(Array.isArray(r))i=St.fromArray(r);else if(typeof r=="string"){let c=t;if(!c){const d=St.rawSplit(r);c=dt.getBestVersionForData(d,e)}i=St.fromString(r,c||40)}else throw new Error("Invalid data");const o=dt.getBestVersionForData(i,e);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const s=zn(t,e,i),l=pt.getSymbolSize(t),a=new xn(l);return In(a,t),Mn(a),kn(a,t),xt(a,e,0),t>=7&&Ln(a,t),Un(a,s),isNaN(n)&&(n=It.getBestMask(a,xt.bind(null,a,e))),It.applyMask(n,a),xt(a,e,n),{modules:a,version:t,errorCorrectionLevel:e,maskPattern:n,segments:i}}ge.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let n=Ct.M,i,o;return typeof e<"u"&&(n=Ct.from(e.errorCorrectionLevel,Ct.M),i=dt.from(e.version),o=It.from(e.maskPattern),e.toSJISFunc&&pt.setToSJISFunction(e.toSJISFunc)),On(t,i,n,o)};var Se={},Ht={};(function(r){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,s=n.scale||4;return{width:o,scale:o?4:s,margin:i,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},r.getImageWidth=function(n,i){const o=r.getScale(n,i);return Math.floor((n+i.margin*2)*o)},r.qrToImageData=function(n,i,o){const s=i.modules.size,l=i.modules.data,a=r.getScale(s,o),c=Math.floor((s+o.margin*2)*a),d=o.margin*a,b=[o.color.light,o.color.dark];for(let u=0;u<c;u++)for(let h=0;h<c;h++){let w=(u*c+h)*4,g=o.color.light;if(u>=d&&h>=d&&u<c-d&&h<c-d){const v=Math.floor((u-d)/a),y=Math.floor((h-d)/a);g=b[l[v*s+y]?1:0]}n[w++]=g.r,n[w++]=g.g,n[w++]=g.b,n[w]=g.a}}})(Ht);(function(r){const t=Ht;function e(i,o,s){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=s,o.width=s,o.style.height=s+"px",o.style.width=s+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(o,s,l){let a=l,c=s;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),s||(c=n()),a=t.getOptions(a);const d=t.getImageWidth(o.modules.size,a),b=c.getContext("2d"),u=b.createImageData(d,d);return t.qrToImageData(u.data,o,a),e(b,c,d),b.putImageData(u,0,0),c},r.renderToDataURL=function(o,s,l){let a=l;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),a||(a={});const c=r.render(o,s,a),d=a.type||"image/png",b=a.rendererOpts||{};return c.toDataURL(d,b.quality)}})(Se);var xe={};const Hn=Ht;function ie(r,t){const e=r.a/255,n=t+'="'+r.hex+'"';return e<1?n+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':n}function Bt(r,t,e){let n=r+t;return typeof e<"u"&&(n+=" "+e),n}function Fn(r,t,e){let n="",i=0,o=!1,s=0;for(let l=0;l<r.length;l++){const a=Math.floor(l%t),c=Math.floor(l/t);!a&&!o&&(o=!0),r[l]?(s++,l>0&&a>0&&r[l-1]||(n+=o?Bt("M",a+e,.5+c+e):Bt("m",i,0),i=0,o=!1),a+1<t&&r[l+1]||(n+=Bt("h",s),s=0)):i++}return n}xe.render=function(t,e,n){const i=Hn.getOptions(e),o=t.modules.size,s=t.modules.data,l=o+i.margin*2,a=i.color.light.a?"<path "+ie(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",c="<path "+ie(i.color.dark,"stroke")+' d="'+Fn(s,o,i.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+a+c+`</svg>
`;return typeof n=="function"&&n(null,u),u};const Vn=en,kt=ge,Be=Se,qn=xe;function Ft(r,t,e,n,i){const o=[].slice.call(arguments,1),s=o.length,l=typeof o[s-1]=="function";if(!l&&!Vn())throw new Error("Callback required as last argument");if(l){if(s<2)throw new Error("Too few arguments provided");s===2?(i=e,e=t,t=n=void 0):s===3&&(t.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=e,e=t,t=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(e=t,t=n=void 0):s===2&&!t.getContext&&(n=e,e=t,t=void 0),new Promise(function(a,c){try{const d=kt.create(e,n);a(r(d,t,n))}catch(d){c(d)}})}try{const a=kt.create(e,n);i(null,r(a,t,n))}catch(a){i(a)}}et.create=kt.create;et.toCanvas=Ft.bind(null,Be.render);et.toDataURL=Ft.bind(null,Be.renderToDataURL);et.toString=Ft.bind(null,function(r,t,e){return qn.render(r,e)});const jn=.1,re=2.5,T=7;function Pt(r,t,e){return r===t?!1:(r-t<0?t-r:r-t)<=e+jn}function Kn(r,t){const e=Array.prototype.slice.call(et.create(r,{errorCorrectionLevel:t}).modules.data,0),n=Math.sqrt(e.length);return e.reduce((i,o,s)=>(s%n===0?i.push([o]):i[i.length-1].push(o))&&i,[])}const Jn={generate(r,t,e,n="light"){const i=n==="light"?"#141414":"#fff",o=n==="light"?"#fff":"#141414",s=[],l=Kn(r,"Q"),a=t/l.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:g,y:v})=>{const y=(l.length-T)*a*g,f=(l.length-T)*a*v,p=.32;for(let m=0;m<c.length;m+=1){const $=a*(T-m*2);s.push(mt`<rect fill="${m%2===0?i:o}" height="${$}" rx="${$*p}" ry="${$*p}" width="${$}" x="${y+a*m}" y="${f+a*m}">`)}});const d=Math.floor((e+25)/a),b=l.length/2-d/2,u=l.length/2+d/2-1,h=[];l.forEach((g,v)=>{g.forEach((y,f)=>{if(l[v][f]&&!(v<T&&f<T||v>l.length-(T+1)&&f<T||v<T&&f>l.length-(T+1))&&!(v>b&&v<u&&f>b&&f<u)){const p=v*a+a/2,m=f*a+a/2;h.push([p,m])}})});const w={};return h.forEach(([g,v])=>{w[g]?w[g].push(v):w[g]=[v]}),Object.entries(w).map(([g,v])=>{const y=v.filter(f=>v.every(p=>!Pt(f,p,a)));return[Number(g),y]}).forEach(([g,v])=>{v.forEach(y=>{s.push(mt`<circle cx="${g}" cy="${y}" fill="${i}" r="${a/re}">`)})}),Object.entries(w).filter(([g,v])=>v.length>1).map(([g,v])=>{const y=v.filter(f=>v.some(p=>Pt(f,p,a)));return[Number(g),y]}).map(([g,v])=>{v.sort((f,p)=>f<p?-1:1);const y=[];for(const f of v){const p=y.find(m=>m.some($=>Pt(f,$,a)));p?p.push(f):y.push([f])}return[g,y.map(f=>[f[0],f[f.length-1]])]}).forEach(([g,v])=>{v.forEach(([y,f])=>{s.push(mt`<line x1="${g}" x2="${g}" y1="${y}" y2="${f}" stroke="${i}" stroke-width="${a/(re/2)}" stroke-linecap="round">`)})}),s}},Yn=He`.o21pay-logo{content:url(https://assets.obvious21.com/o21pay-assets/o21pay.png)}.pr-qrcode{position:relative;background-color:#000;padding:10px 10px 10px 10px;border-radius:15px;cursor:pointer}.pr-qrcode.shadow{box-shadow:rgba(0,0,0,.35) 0 5px 15px}.dark-theme{background-color:#000!important}.light-theme{background-color:#fff!important}@keyframes zoomIn{from{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}100%{opacity:1}}.zoomIn{-webkit-animation-name:zoomIn;animation-name:zoomIn}`;var Xn=Object.defineProperty,Qn=(r,t,e)=>t in r?Xn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Zn=(r,t,e)=>(Qn(r,typeof t!="symbol"?t+"":t,e),e);class Pe extends Y{static get properties(){return{size:{type:String,attribute:"size"},theme:{type:String,attribute:"theme"},shadow:{type:Boolean,attribute:"shadow"},url:{type:String,attribute:"url"}}}constructor(){super(),this.theme="dark",this.size="320",this.shadow=!1,this.url="",this.eventsO21Pay=void 0}_onClick(t){const e={detail:{url:this.url},bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("o21pay_QRclick",e))}render(){const t=this.url;if(!t||!t.length)return $t``;this.size=parseInt(this.size)||"320",this.logoSize=this.size/3.3;const e=(this.size-this.logoSize)/2+9,n=(this.size-this.logoSize)/2+12,i=(s=>$t`<svg height="${this.size}" width="${this.size}">${s}</svg>`)(Jn.generate(this.url,this.size,this.size/4,this.theme));let o=`pr-qrcode ${this.theme}-theme`;return this.shadow&&(o+=" shadow"),$t`
      <div id="qrsvg" class="${o}" style="width: ${this.size}px;height: ${this.size}px;">
        <svg height="${this.size}" width="${this.size}" @click="${this._onClick}">${i}</svg>
        <img
          class="o21pay-logo"
          height="${this.logoSize}"
          style="position: absolute; top: ${e}px; left: ${n}px;"
        />
      </div>
    `}}Zn(Pe,"styles",[Yn]);window.customElements.define("o21pay-qr",Pe);window.O21PayComponents={waitLoaded:async function(){return await Promise.allSettled([customElements.whenDefined("o21pay-qr"),customElements.whenDefined("o21pay-dialog"),customElements.whenDefined("o21pay-payment")]),!0}};
//# sourceMappingURL=all.js.map
